
# Step Repository Format

This description covers what's required for a Step repository
which can be submitted into this open StepLib collection.


## General requirements

A Step have to be a Git repository hosted on GitHub as a public repository.

**You can find an annotated Step repository example in the templates/step folder.**

It have to contain:

* a step.sh file : this is the entry point of you Step
* a step.yml file : contains the description of the Step
* a LICENSE file (we prefer the MIT or the WTFPL license)

Recommended:

* a README.md file (readme file in Markdown format)

## Step.yml and default values

The following properties are all required in the step.yml descriptor file:

* name : Name / title of your step, presented in Step libraries, search results, UIs, ...
* description : detailed description of your Step in markdown format. You can include important notes and setup guide or anything important related to your step.
* website : can be the step's github page or a dedicated website if you have one.
* source : Step source code access information
  * git : at the moment we only accept git repositories hosted on GitHub, as an open repository. This attribute should point to your Step's repository and should be an URL which can be passed to `git clone` directly.
* host_os_tags : the Operating System tags which are supported by your step, in the following format: [short-os-code]-[the.os.version.number]. You should test your step on all the listed OS versions!
* type_tags : regular tags, used for searching, filtering or grouping by StepLib programs/services.
* requires_admin_user : If your step doesn't require an administrator user account to run properly then you should set this to 'false'

### Inputs

Inputs are a list of Environment Variable Keys and user-friendly input related
descriptions / settings. A StepLib compatible program or service
should map the given input's content (the one the user specifies
for the given input, where the user generally see the *title* of the input)
to the specified environment key.

At the moment we don't support input types, all the inputs
are expected to be text/string values and the step is
expected to validate the input and it's type if required.

* title : [required] Title of the input (presentable to the user)
* mapped_to : [required] The environment variable which will contain the value
  the user provides. Don't include the dollar sign, just the environment
  variable's name.
* is_expand : [default: true] Whether to do an environment expansion
  on the value of the input before storing it in the environment.
  As an example you might want to include other environment variables in
  an email summarizing a build. If is_expand is true (default) and
  you (or the user) include let's say a `${XCODE_BUILDER_STATUS}` environment
  reference then the string ${XCODE_BUILDER_STATUS} will be replaced
  with the environment value of XCODE_BUILDER_STATUS.
  If is_expand is false then the string `${XCODE_BUILDER_STATUS}` will
  be included instead of the related environment value it references.

### Outputs

Similar to *inputs* the *outputs* is a list of environment variables.
The main difference is that outputs are not generated by or managed
by the StepLib programs / services, your step is responsible to generate these outputs,
and to make it accessible for other steps which will run after your
step finishes.

This list is used for StepLib programs / services to be able to
provide UI for connecting one step's outputs with other steps' inputs.

Title is meant to be presented on UIs, and the "mapped_to" parameter
identifies the Environment Variable Key your step will generate.

* title : [required] Title of the output (presentable to the user)
* mapped_to : [required] The environment variable which will contain
  the value of your step's output. Don't include the dollar sign, just the environment
  variable's name.

> You can find an annotated Step repository example in the *templates/step* folder.
